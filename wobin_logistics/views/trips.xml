<odoo>
  <data>

    <!--::::::::::::::::::::::::::::::::::::::::::::-->
    <!-- INHERITANCES -->
    <!--::::::::::::::::::::::::::::::::::::::::::::-->

    <!--Analytic Tag Form Inherited where a new selection field type was added-->
    <record id="analytic_tagform_inherited" model="ir.ui.view">
        <field name="name">account.analytic.tag.form.inherit</field>
        <field name="model">account.analytic.tag</field>
        <field name="inherit_id" ref="analytic.account_analytic_tag_form_view"/>
        <field name="arch" type="xml">
           <xpath expr="//field[@name='name']" position="after">
                <field name="analytic_tag_type"/>
            </xpath>        
        </field>
    </record> 
    <!--Add a new many2one field into Analytic Account model-->
    <record id="analytic_accountform_inherit" model="ir.ui.view">
        <field name="name">analytic.analytic.account.form.inherit</field>
        <field name="model">account.analytic.account</field>
        <field name="inherit_id" ref="analytic.view_account_analytic_account_form"/>
        <field name="arch" type="xml">
           <xpath expr="//field[@name='partner_id']" position="after">
                <field name="vehicle_id"/>
            </xpath>        
        </field>
    </record>  
    <!--Add a new many2one field of Trips into Account Invoice model-->
    <record id="invoice_with_trips_form_inherit" model="ir.ui.view">
        <field name="name">accnt.invoice.trips.form.inherit</field>
        <field name="model">account.invoice</field>
        <field name="inherit_id" ref="account.invoice_form"/>
        <field name="arch" type="xml">
           <xpath expr="//tree/field[@name='product_id']" position="after">
                <field name="trips_id"/>
            </xpath>        
        </field>
    </record> 
    <!--Add a new many2one field of Trips into Account Invoice model-->
    <record id="restriction_create_invoice_sales_order" model="ir.ui.view">
        <field name="name">sale.order.form.inherit</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='%(sale.343)d']" position="attributes">
                <attribute name="groups">wobin_logistics.group_access_analysis</attribute>
            </xpath>        
        </field>
    </record>        


    
    <!--Definition to display customer invoice form-->
    <record id="action_create_invoice" model="ir.actions.act_window">
        <field name="name">account.invoice.form.inherit</field>
        <field name="res_model">account.invoice</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="account.invoice_form"/>
        <field name="target">new</field>
    </record>           



    <!--::::::::::::::::::::::::::::::::::::::::::::-->
    <!-- VIEWS {LISTS, FORMS, SEARCH} -->
    <!--::::::::::::::::::::::::::::::::::::::::::::-->

    <!-- TRIPS - LIST VIEW -->
    <record id="view_logistics_trips_list" model="ir.ui.view">
      <field name="name">Trips</field>
      <field name="model">logistics.trips</field>
      <field name="arch" type="xml">
        <tree decoration-danger="state == 'assigned'" decoration-warning="state == 'route'" decoration-success="state == 'discharged'">
          <field name="name"/>
          <field name="contracts_id"/>
          <field name="sales_order_id"/>
          <field name="client_id"/>
          <field name="vehicle_id"/>
          <field name="analytic_accnt_id"/>
          <field name="operator_id"/>          
          <field name="route"/>
          <field name="advance_id" widget="many2many_tags"/>
          <field name="start_date"/>
          <field name="upload_date"/>
          <field name="estimated_qty"/>
          <field name="real_upload_qty"/>
          <field name="download_date"/>
          <field name="real_download_qty"/>  
          <field name="state"/>          
        </tree>
      </field>
    </record>

    <!-- TRIPS - FORM VIEW -->
    <record id="view_logistics_trips_form" model="ir.ui.view"> 
        <field name="name">Trips</field> 
        <field name="model">logistics.trips</field> 
        <field name="arch" type="xml"> 
            <form> 
                <header>
                    <field name="state" widget="statusbar" statusbar_visible="assigned,route,discharged"/>
                </header> 
                <sheet>
                    <div class="oe_left oe_title">
                        <h1>
                            <field name="name" readonly="True"/>
                        </h1>
                    </div>                
                    <group>
                        <group>
                            <field name="contracts_id"/>
                            <field name="sales_order_id"/>
                            <field name="client_id"/>
                            <field name="vehicle_id"/> 
                            <field name="analytic_accnt_id"/>                           
                            <field name="operator_id"/>
                            <field name="route"/>  
                            <field name="advance_id" widget="many2many_tags"/>                                           
                        </group>
                        <group>
                            <field name="start_date"/>
                            <field name="upload_date"/>
                            <field name="estimated_qty"/>
                            <field name="real_upload_qty"/>
                            <field name="attachment_upload"/>
                            <field name="download_date"/>
                            <field name="real_download_qty"/>
                            <field name="attachment_downld"/>
                            <label for="conformity"/>
                            <div>
                                <field name="conformity" class="oe_inline" style="padding-right: 10px"/>
                                <field name="checked" class="oe_inline"/>
                            </div> 
                            <button name="%(action_create_invoice)d" type="action" string="Create Invoice" class="btn-primary" icon="fa-file-text" attrs="{'invisible':[('checked', '=', False)]}"/>                        
                        </group>
                    </group>
                </sheet>              
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>               
            </form> 
        </field> 
    </record>

    <!-- ANALYSIS (TRIPS) according to Sales Order - LIST VIEW -->
    <record id="view_logs_trips_anlys_sl_ord_lst" model="ir.ui.view">
      <field name="name">Trips Analysis according Sales Order</field>
      <field name="model">sale.order</field>
      <field name="arch" type="xml">
        <tree>
          <field name="name"/>          
          <field name="trips" force_save="1"/>
          <field name="covenant_qty" force_save="1"/>
          <field name="trip_delivered_qty" force_save="1"/>
          <field name="difference_qty" force_save="1"/>
          <field name="state" invisible="1"/> 
        </tree>
      </field>
    </record>

    <!-- ANALYSIS (TRIPS) in accordance to trips - LIST VIEW --> 
    <record id="view_logs_trips_anlys_lst" model="ir.ui.view">
      <field name="name">Trips Analysis</field>
      <field name="model">logistics.trips</field>
      <field name="arch" type="xml">
        <tree>
          <field name="name"/>  
          <field name="contracts_id"/>
          <field name="sales_order_id"/>
          <field name="trip_taxes" widget="many2many_tags"/> 
          <field name="income_provisions"/>
          <field name="invoice_status"/>       
        </tree>
      </field>
    </record>       

    <!-- ROUTES ANALYSIS from contract assignments - LIST VIEW -->
    <record id="view_logs_routes_lst" model="ir.ui.view">
      <field name="name">Routes</field>
      <field name="model">logistics.contracts</field>
      <field name="arch" type="xml">
        <tree>          
          <field name="origin_id"/>
          <field name="destination_id"/>
          <field name="name"/>
          <field name="write_date"/>           
        </tree>
      </field>
    </record>    

  </data>  
</odoo>    